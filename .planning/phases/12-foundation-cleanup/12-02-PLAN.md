---
phase: 12-foundation-cleanup
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/ios/trendy/Views/Geofence/GeofenceListView.swift
  - apps/ios/trendy/Services/NotificationManager.swift
  - apps/ios/trendy/Views/Components/EventEditView.swift
  - apps/ios/trendy/Utilities/CalendarImportManager.swift
  - apps/ios/trendy/Views/MainTabView.swift
  - apps/ios/trendy/Services/HealthKitSettings.swift
  - apps/ios/trendy/Models/Migration/SchemaMigrationPlan.swift
  - apps/ios/trendy/Utilities/CalendarManager.swift
autonomous: true

must_haves:
  truths:
    - "Zero print() statements in the 8 service and manager modules listed in files_modified"
    - "All logging in these files uses structured Log.* categories with context fields"
    - "App still compiles and runs normally"
  note: >
    Core target modules (SyncEngine, APIClient, LocalStore, HealthKit services) already have zero print() statements
    and use structured logging. This plan addresses 88 print() statements in peripheral service/manager files.
  artifacts:
    - path: "apps/ios/trendy/Services/NotificationManager.swift"
      provides: "Notification service with structured logging"
      contains: "Log."
    - path: "apps/ios/trendy/Utilities/CalendarImportManager.swift"
      provides: "Calendar import with structured logging"
      contains: "Log.calendar"
  key_links:
    - from: "NotificationManager.swift"
      to: "Logger.swift"
      via: "import and use Log.* categories"
      pattern: "Log\\.(general|geofence)"
---

<objective>
Replace all print() statements in service and utility modules with structured logging

Purpose: Convert medium-priority files (services, managers, core views) from print() to structured logging. These files handle geofence, notifications, calendar, and health settings.

Output: Eight files converted from print() to Log.* structured logging
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/12-foundation-cleanup/12-CONTEXT.md
@.planning/phases/12-foundation-cleanup/12-RESEARCH.md
@apps/ios/trendy/Utilities/Logger.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert geofence and notification print statements</name>
  <files>apps/ios/trendy/Views/Geofence/GeofenceListView.swift, apps/ios/trendy/Services/NotificationManager.swift</files>
  <action>
Replace print() statements in geofence and notification modules:

**GeofenceListView.swift (33 prints):**
1. Use Log.geofence category for geofence operations
2. UI state changes: Log.geofence.debug
3. Geofence CRUD operations: Log.geofence.info
4. Errors: Log.geofence.warning or Log.geofence.error
5. Add context for geofence_id, region details

**NotificationManager.swift (18 prints):**
1. Use Log.general category (no specific notification category)
2. Notification scheduling: Log.general.debug
3. Permission requests: Log.general.info
4. Delivery events: Log.general.debug
5. Errors: Log.general.warning

Category selection rationale:
- Geofence operations are domain-specific -> Log.geofence
- Notifications are cross-cutting -> Log.general
  </action>
  <verify>
1. `grep -c "print(" apps/ios/trendy/Views/Geofence/GeofenceListView.swift` returns 0
2. `grep -c "print(" apps/ios/trendy/Services/NotificationManager.swift` returns 0
3. `grep -c "Log\.geofence" apps/ios/trendy/Views/Geofence/GeofenceListView.swift` returns > 20
4. Build succeeds
  </verify>
  <done>Zero print() statements in GeofenceListView.swift and NotificationManager.swift</done>
</task>

<task type="auto">
  <name>Task 2: Convert calendar and event edit print statements</name>
  <files>apps/ios/trendy/Views/Components/EventEditView.swift, apps/ios/trendy/Utilities/CalendarImportManager.swift, apps/ios/trendy/Utilities/CalendarManager.swift</files>
  <action>
Replace print() statements in calendar-related and event editing modules:

**EventEditView.swift (11 prints):**
1. Use Log.ui category for view operations
2. Form state changes: Log.ui.debug
3. Validation errors: Log.ui.warning
4. Add context for event_id, field names

**CalendarImportManager.swift (10 prints):**
1. Use Log.calendar category
2. Import progress: Log.calendar.info
3. Individual event imports: Log.calendar.debug
4. Import errors: Log.calendar.warning
5. Add context for event_count, calendar_name

**CalendarManager.swift (1 print):**
1. Use Log.calendar category
2. Determine appropriate level based on context
  </action>
  <verify>
1. `grep -c "print(" apps/ios/trendy/Views/Components/EventEditView.swift` returns 0
2. `grep -c "print(" apps/ios/trendy/Utilities/CalendarImportManager.swift` returns 0
3. `grep -c "print(" apps/ios/trendy/Utilities/CalendarManager.swift` returns 0
4. Build succeeds
  </verify>
  <done>Zero print() statements in event edit and calendar modules</done>
</task>

<task type="auto">
  <name>Task 3: Convert remaining service print statements</name>
  <files>apps/ios/trendy/Views/MainTabView.swift, apps/ios/trendy/Services/HealthKitSettings.swift, apps/ios/trendy/Models/Migration/SchemaMigrationPlan.swift</files>
  <action>
Replace print() statements in remaining service files:

**MainTabView.swift (7 prints):**
1. Use Log.ui category for main navigation
2. Tab selection: Log.ui.debug
3. Navigation state: Log.ui.debug
4. Add context for selected_tab, navigation_path

**HealthKitSettings.swift (6 prints):**
1. Use Log.healthKit category
2. Settings changes: Log.healthKit.info
3. Category toggling: Log.healthKit.debug
4. Add context for category_name, enabled state

**SchemaMigrationPlan.swift (2 prints):**
1. Use Log.migration category
2. Migration steps: Log.migration.info
3. Add context for version, stage
  </action>
  <verify>
1. `grep -c "print(" apps/ios/trendy/Views/MainTabView.swift` returns 0
2. `grep -c "print(" apps/ios/trendy/Services/HealthKitSettings.swift` returns 0
3. `grep -c "print(" apps/ios/trendy/Models/Migration/SchemaMigrationPlan.swift` returns 0
4. Build succeeds
  </verify>
  <done>Zero print() statements in MainTabView, HealthKitSettings, and SchemaMigrationPlan</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Verify zero prints in all target files:
```bash
for f in Views/Geofence/GeofenceListView.swift Services/NotificationManager.swift Views/Components/EventEditView.swift Utilities/CalendarImportManager.swift Utilities/CalendarManager.swift Views/MainTabView.swift Services/HealthKitSettings.swift Models/Migration/SchemaMigrationPlan.swift; do
  count=$(grep -c 'print(' "apps/ios/trendy/$f" 2>/dev/null || echo 0)
  echo "$f: $count"
done
```

2. Verify build succeeds:
```bash
cd apps/ios && xcodebuild -scheme "Trendy (Local)" -destination "platform=iOS Simulator,name=iPhone 16" build 2>&1 | grep -E "(BUILD|error:)"
```
</verification>

<success_criteria>
- [ ] Zero print() statements in GeofenceListView.swift (was 33)
- [ ] Zero print() statements in NotificationManager.swift (was 18)
- [ ] Zero print() statements in EventEditView.swift (was 11)
- [ ] Zero print() statements in CalendarImportManager.swift (was 10)
- [ ] Zero print() statements in MainTabView.swift (was 7)
- [ ] Zero print() statements in HealthKitSettings.swift (was 6)
- [ ] Zero print() statements in SchemaMigrationPlan.swift (was 2)
- [ ] Zero print() statements in CalendarManager.swift (was 1)
- [ ] All files use Log.* with appropriate categories
- [ ] iOS app builds successfully
</success_criteria>

<output>
After completion, create `.planning/phases/12-foundation-cleanup/12-02-SUMMARY.md`
</output>
