---
phase: 12-foundation-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/ios/trendy/trendyApp.swift
  - apps/ios/trendy/Services/SupabaseService.swift
  - apps/ios/trendy/ViewModels/AuthViewModel.swift
  - apps/ios/trendy/Models/Event.swift
autonomous: true

must_haves:
  truths:
    - "Zero print() statements in trendyApp.swift, SupabaseService.swift, AuthViewModel.swift, and Event.swift"
    - "All logging in these 4 files uses structured Log.* categories with context fields"
    - "App still compiles and runs normally"
  note: >
    Core target modules (SyncEngine, APIClient, LocalStore, HealthKit services) already have zero print() statements
    and use structured logging. This plan addresses 64 print() statements in peripheral app startup and auth files.
  artifacts:
    - path: "apps/ios/trendy/trendyApp.swift"
      provides: "App entry point with structured logging"
      contains: "Log."
    - path: "apps/ios/trendy/Services/SupabaseService.swift"
      provides: "Auth service with structured logging"
      contains: "Log.auth"
    - path: "apps/ios/trendy/ViewModels/AuthViewModel.swift"
      provides: "Auth state with structured logging"
      contains: "Log.auth"
  key_links:
    - from: "trendyApp.swift"
      to: "Logger.swift"
      via: "import and use Log.* categories"
      pattern: "Log\\.(general|data|sync)"
---

<objective>
Replace all print() statements in core app files with structured logging

Purpose: Eliminate debug print statements that clutter Console output and lack filtering/levels. These are the highest-priority files: app startup, authentication services.

Output: Four files converted from print() to Log.* structured logging
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/12-foundation-cleanup/12-CONTEXT.md
@.planning/phases/12-foundation-cleanup/12-RESEARCH.md
@apps/ios/trendy/Utilities/Logger.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert trendyApp.swift print statements</name>
  <files>apps/ios/trendy/trendyApp.swift</files>
  <action>
Replace all 41 print() statements with appropriate Log.* calls:

1. Read the file and identify all print() statements
2. For each print(), determine the appropriate category and level:
   - App startup messages: Log.general.info or Log.general.debug
   - Database/ModelContainer messages: Log.data.info or Log.data.debug
   - Schema validation: Log.data.debug
   - Error messages (marked with warning emoji): Log.data.warning or Log.data.error
   - Screenshot mode messages: Log.general.debug

3. Convert simple prints to Log calls with context:
   - `print("message")` -> `Log.category.level("message")`
   - `print("message \(variable)")` -> `Log.category.level("message", context: .with { ctx in ctx.add("key", variable) })`

4. Preserve #if DEBUG wrappers where they exist

5. Keep emoji prefixes in log messages for visual scanning (they're useful)

Example conversions:
- `print("ModelContainer created successfully")` ->
  `Log.data.info("ModelContainer created successfully")`
- `print("EventTypes: \(count)")` ->
  `Log.data.debug("Schema counts", context: .with { ctx in ctx.add("event_types", count) })`
  </action>
  <verify>
1. `grep -c "print(" apps/ios/trendy/trendyApp.swift` returns 0
2. `grep -c "Log\." apps/ios/trendy/trendyApp.swift` returns > 30
3. `cd apps/ios && xcodebuild -scheme "Trendy (Local)" -destination "platform=iOS Simulator,name=iPhone 16" build 2>&1 | tail -5` succeeds
  </verify>
  <done>Zero print() statements in trendyApp.swift, all converted to Log.* calls</done>
</task>

<task type="auto">
  <name>Task 2: Convert auth service print statements</name>
  <files>apps/ios/trendy/Services/SupabaseService.swift, apps/ios/trendy/ViewModels/AuthViewModel.swift</files>
  <action>
Replace print() statements in authentication-related files:

**SupabaseService.swift (13 prints):**
1. Use Log.auth category for all auth operations
2. Session/token operations: Log.auth.debug
3. Auth state changes (login/logout): Log.auth.info
4. Auth errors: Log.auth.error or Log.auth.warning
5. Add structured context for user_id (redacted if needed), operation names

**AuthViewModel.swift (6 prints):**
1. Use Log.auth category for auth state
2. State transitions: Log.auth.info
3. Error handling: Log.auth.warning
4. Add context fields for state changes

Example:
- `print("User logged in: \(user.id)")` ->
  `Log.auth.info("User logged in", context: .with { ctx in ctx.add("user_id", user.id.uuidString) })`
  </action>
  <verify>
1. `grep -c "print(" apps/ios/trendy/Services/SupabaseService.swift` returns 0
2. `grep -c "print(" apps/ios/trendy/ViewModels/AuthViewModel.swift` returns 0
3. `grep -c "Log\.auth" apps/ios/trendy/Services/SupabaseService.swift` returns > 10
4. Build still succeeds
  </verify>
  <done>Zero print() statements in SupabaseService.swift and AuthViewModel.swift</done>
</task>

<task type="auto">
  <name>Task 3: Convert Event model print statements</name>
  <files>apps/ios/trendy/Models/Event.swift</files>
  <action>
Replace 4 print() statements in Event.swift:

1. These are likely in #if DEBUG blocks for model debugging
2. Use Log.data category since this is a data model
3. Keep #if DEBUG wrappers in place
4. Add structured context for event details

Level guidance:
- Model initialization: Log.data.debug
- Property changes: Log.data.debug
- Validation issues: Log.data.warning
  </action>
  <verify>
1. `grep -c "print(" apps/ios/trendy/Models/Event.swift` returns 0
2. Build still succeeds
  </verify>
  <done>Zero print() statements in Event.swift</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Verify zero prints in all target files:
```bash
for f in trendyApp.swift Services/SupabaseService.swift ViewModels/AuthViewModel.swift Models/Event.swift; do
  echo "$f: $(grep -c 'print(' apps/ios/trendy/$f 2>/dev/null || echo 0)"
done
```

2. Verify structured logging added:
```bash
grep -c "Log\." apps/ios/trendy/trendyApp.swift
grep -c "Log\.auth" apps/ios/trendy/Services/SupabaseService.swift
```

3. Verify build succeeds:
```bash
cd apps/ios && xcodebuild -scheme "Trendy (Local)" -destination "platform=iOS Simulator,name=iPhone 16" build 2>&1 | grep -E "(BUILD|error:)"
```
</verification>

<success_criteria>
- [ ] Zero print() statements in trendyApp.swift (was 41)
- [ ] Zero print() statements in SupabaseService.swift (was 13)
- [ ] Zero print() statements in AuthViewModel.swift (was 6)
- [ ] Zero print() statements in Event.swift (was 4)
- [ ] All files use Log.* with appropriate categories
- [ ] iOS app builds successfully
</success_criteria>

<output>
After completion, create `.planning/phases/12-foundation-cleanup/12-01-SUMMARY.md`
</output>
