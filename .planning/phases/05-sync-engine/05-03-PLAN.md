---
phase: 05-sync-engine
plan: 03
type: execute
wave: 2
depends_on: ["05-01", "05-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can create events while offline without errors"
    - "Offline events sync when network returns"
    - "Pending mutations survive app restart"
    - "Sync status UI reflects actual state"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete sync engine functionality through manual testing.

Purpose: SYNC-01 through SYNC-04 require end-to-end verification that cannot be automated. This checkpoint confirms offline-first behavior works as expected.

Output: Verified working sync engine satisfying all SYNC requirements.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/05-sync-engine/05-01-SUMMARY.md
@.planning/phases/05-sync-engine/05-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete sync engine with:
- Offline CRUD operations (SYNC-01)
- Automatic sync on network restoration (SYNC-02)
- Persistent mutation queue (SYNC-03)
- Sync state visibility in UI (SYNC-04)
  </what-built>
  <how-to-verify>
**Test Setup:**
1. Run the iOS app in Simulator (or device)
2. Ensure you're logged in and can see events

**Test 1: Sync Status Visibility (SYNC-04)**
1. Look at the Events list screen
2. Expected: See "Synced X ago" banner at top (not hardcoded ".idle")
3. If you have pending items, see "N pending changes" with count

**Test 2: Offline Create (SYNC-01)**
1. Enable Airplane Mode on device/simulator
2. Create a new event (tap +, select type, save)
3. Expected: Event appears in list immediately
4. Expected: Banner shows "1 pending change"
5. No error messages should appear

**Test 3: Network Restoration Sync (SYNC-02)**
1. With pending change from Test 2, disable Airplane Mode
2. Expected: Banner changes to "Syncing..."
3. Expected: After sync completes, banner shows "Synced just now"
4. Expected: Pending count returns to 0

**Test 4: Mutation Persistence (SYNC-03)**
1. Enable Airplane Mode
2. Create another event offline
3. Force quit the app (swipe up from app switcher)
4. Relaunch the app
5. Expected: Pending change still shows in banner
6. Disable Airplane Mode
7. Expected: Change syncs successfully

**Test 5: Edit/Delete Offline**
1. Enable Airplane Mode
2. Edit an existing event (change notes)
3. Delete a different event
4. Expected: Both changes reflected in UI immediately
5. Expected: Pending count shows 2
6. Disable Airplane Mode
7. Expected: Both changes sync to backend

**Test 6: Error State Display**
1. If possible, trigger a sync error (e.g., invalid token)
2. Expected: Banner shows error message with "Retry" button
3. Tapping Retry should attempt sync again
  </how-to-verify>
  <resume-signal>Type "verified" if all tests pass, or describe which tests failed and what happened</resume-signal>
</task>

</tasks>

<verification>
All SYNC requirements verified through manual testing:
- SYNC-01: Offline CRUD works without errors
- SYNC-02: Auto-sync on network restoration
- SYNC-03: Mutations persist across restart
- SYNC-04: Sync state visible in UI
</verification>

<success_criteria>
- [ ] All 6 manual tests pass
- [ ] No unexpected errors during offline operations
- [ ] UI correctly reflects sync state at all times
- [ ] Data consistency maintained (no lost events)
</success_criteria>

<output>
After completion, create `.planning/phases/05-sync-engine/05-03-SUMMARY.md`
</output>
