---
phase: 10-visual-design-flow
plan: 02
type: execute
wave: 2
depends_on: ["10-01"]
files_modified:
  - apps/ios/trendy/Views/Onboarding/WelcomeView.swift
  - apps/ios/trendy/Views/Onboarding/OnboardingAuthView.swift
autonomous: true

must_haves:
  truths:
    - "WelcomeView displays hero area with gradient and SF Symbol at top"
    - "OnboardingAuthView displays hero area with gradient and SF Symbol at top"
    - "Both screens show progress bar at top below safe area"
    - "Primary action button is pinned at bottom of screen"
  artifacts:
    - path: "apps/ios/trendy/Views/Onboarding/WelcomeView.swift"
      provides: "Redesigned welcome screen with hero layout"
      contains: "OnboardingHeroView"
    - path: "apps/ios/trendy/Views/Onboarding/OnboardingAuthView.swift"
      provides: "Redesigned auth screen with hero layout"
      contains: "OnboardingProgressBar"
  key_links:
    - from: "WelcomeView"
      to: "OnboardingHeroView"
      via: "import and instantiation"
      pattern: "OnboardingHeroView\\("
    - from: "WelcomeView"
      to: "OnboardingProgressBar"
      via: "import and instantiation"
      pattern: "OnboardingProgressBar\\("
    - from: "OnboardingAuthView"
      to: "OnboardingHeroView"
      via: "import and instantiation"
      pattern: "OnboardingHeroView\\("
---

<objective>
Redesign WelcomeView and OnboardingAuthView with modern hero layouts.

Purpose: These are the first two screens new users see. Modern visual design with hero areas, progress indication, and consistent layout establishes the app's quality from first impression. Addresses DESIGN-01 (modern layouts), DESIGN-02 (consistent design language), and DESIGN-05 (progress indicator).

Output: Updated WelcomeView and OnboardingAuthView using the new OnboardingHeroView and OnboardingProgressBar components.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/10-visual-design-flow/10-CONTEXT.md
@.planning/phases/10-visual-design-flow/10-RESEARCH.md
@.planning/phases/10-visual-design-flow/10-01-SUMMARY.md

# Files being modified
@apps/ios/trendy/Views/Onboarding/WelcomeView.swift
@apps/ios/trendy/Views/Onboarding/OnboardingAuthView.swift

# Component files created in Plan 01
@apps/ios/trendy/Views/Onboarding/Components/OnboardingHeroView.swift
@apps/ios/trendy/Views/Onboarding/Components/OnboardingProgressBar.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Redesign WelcomeView with Hero Layout</name>
  <files>apps/ios/trendy/Views/Onboarding/WelcomeView.swift</files>
  <action>
Redesign WelcomeView to use the new hero layout pattern.

**Layout structure (top to bottom):**
1. OnboardingProgressBar at top (progress: 0.0 for welcome, step 1 of flow)
   - Padding: horizontal 24, top 8
2. OnboardingHeroView with:
   - symbolName: "chart.line.uptrend.xyaxis" (existing icon)
   - gradientColors: [Color.dsPrimary, Color.dsAccent]
3. Spacer
4. Content area with:
   - Bold headline: "Track anything."
   - Second line with accent color: "See patterns."
   - Subtitle: existing description text
   - Minimal text density per CONTEXT.md
5. Spacer
6. Feature highlights section (keep existing FeatureHighlightRow, but simplified - 2-3 rows max)
7. Spacer
8. Action buttons pinned at bottom:
   - Primary: "Get Started" button (existing)
   - Secondary: "I already have an account" link (existing)
   - Padding: horizontal 32, bottom 40

**Per CONTEXT.md decisions:**
- Full-bleed hero layout with large visual at top, content below
- Minimal text density: bold headline + single sentence per screen
- Primary action button pinned at bottom of screen (always visible)
- Keep feature highlights but ensure they don't make screen feel cluttered

**Keep existing functionality:**
- Button taps call viewModel.advanceToNextStep()
- "I already have an account" sets isSignInMode and jumps to auth

Add haptic feedback on primary button tap using .sensoryFeedback(.impact(weight: .medium), trigger: stepAdvanced) pattern from RESEARCH.md.
  </action>
  <verify>
1. File compiles without errors
2. Build succeeds: `cd apps/ios && xcodebuild -scheme trendy -destination 'platform=iOS Simulator,name=iPhone 16 Pro' build 2>&1 | grep -E "(error:|BUILD)"`
3. Preview shows hero at top, progress bar, content, buttons at bottom
  </verify>
  <done>WelcomeView displays hero layout with progress bar, maintains existing navigation logic</done>
</task>

<task type="auto">
  <name>Task 2: Redesign OnboardingAuthView with Hero Layout</name>
  <files>apps/ios/trendy/Views/Onboarding/OnboardingAuthView.swift</files>
  <action>
Redesign OnboardingAuthView to use the new hero layout pattern.

**Layout structure (top to bottom):**
1. OnboardingProgressBar at top (progress: 0.167 for auth - step 2 of 6 in current flow, or calculate based on OnboardingStep)
   - Padding: horizontal 24, top 8
2. OnboardingHeroView with:
   - symbolName: Dynamic based on isSignIn mode
     - Sign in: "person.crop.circle.fill"
     - Sign up: "person.crop.circle.fill.badge.plus"
   - gradientColors: [Color.dsPrimary.opacity(0.8), Color.dsAccent]
3. ScrollView for form content (to handle keyboard):
   - Headline: "Welcome Back" or "Create Account" (existing)
   - Subtitle: "Sign in to continue" or "Start tracking your life" (existing)
   - Google Sign-In button (if available)
   - Divider with "or"
   - Email/password form fields (keep existing styling)
   - Error message area
   - Submit button
   - Toggle sign up/sign in link
   - Back button (when in sign up mode)
4. Form area should have bottom padding to avoid keyboard overlap

**Per CONTEXT.md decisions:**
- Respects system light/dark mode preference
- Primary action button (Submit) should be prominent
- Keep form functional exactly as-is - this is visual redesign only

**Keep ALL existing functionality:**
- Email/password validation
- Sign in/sign up toggle
- Google Sign-In
- Error display
- Back button navigation
- isFormValid logic
- submitForm() async
- signInWithGoogle() async

The hero should be shorter than welcome (maybe 200pt instead of 280pt) to leave room for the form.

Add a computed property to calculate progress based on current step in flow.
  </action>
  <verify>
1. File compiles without errors
2. Build succeeds
3. Preview shows hero at top, progress bar, form below
4. Both sign-in and sign-up modes render correctly in preview
  </verify>
  <done>OnboardingAuthView displays hero layout with progress bar, all auth functionality preserved</done>
</task>

</tasks>

<verification>
After all tasks:
1. Project builds without errors
2. WelcomeView uses OnboardingHeroView and OnboardingProgressBar
3. OnboardingAuthView uses OnboardingHeroView and OnboardingProgressBar
4. Both screens have primary buttons pinned at bottom
5. Existing navigation and auth logic unchanged
6. Haptic feedback works on button taps (requires device/simulator testing)
</verification>

<success_criteria>
1. Both Swift files updated with new layout
2. `xcodebuild build` succeeds
3. WelcomeView shows progress bar at 0%, hero at top
4. OnboardingAuthView shows dynamic progress, hero changes based on mode
5. Auth form fields and validation work exactly as before
6. Design system colors used throughout (Color.ds*)
</success_criteria>

<output>
After completion, create `.planning/phases/10-visual-design-flow/10-02-SUMMARY.md`
</output>
